## 6장. 함수형 프로그래밍
> 정리 링크 : https://gh402.tistory.com/57 [GHY 's TechBlog]

#### 함수형 프로그래밍이라는 개념은 프로그래밍 그 자체보다 앞서 등장했다.
#### 이 패러다임에서 핵심이 되는 기반은 "람다"계산법으로 알론조 처치가 1930년대에 발명했다.

### 1) 정수를 제곱하기
- ex) 자바 예시
```java
public static void main(String args[]) {
	for (int i=0; i<25; i++) {
    	System.out.println(i*i);
    }
}
```
- 자바는 가변변수 사용
- ex) 클로저 사용 예시
```java
(println (take 25 (map (fn [x] (* x x)) (range))))
```
- 함수형 언어에서는 변수가 변하지 않는다.
 
</br>
</br>

### 2) 불변성과 아키텍처
```java
Q. 왜 아키텍처에서 변수의 가변성이 중요한가?
A. 경합조건, 교착상태조건, 동시 업데이트 문제가 모두 가변변수로 인해 발생하기 때문이다.
```
- 아키텍트라면 무조건 "동시성"문제에 관심을 기울이고, 스레드와 프로세스가 여러 개인 상황에서도 설계한 시스템이 강경하길 바란다. 
- 그렇다면, 불변성이 정말로 실현 가능할까?
- 저장공간이 무한하고 프로세서의 속도가 무한히 빠르다고 가정하면 긍정적이다.
- cf) 경합조건
    - 두 개의 쓰레드가 같은 자원으로 접근하기 위해 경쟁하고, 이 자원으로 인해 접근 순서가 중요한 의미를 지니는 상황.

 </br>
 </br>

### 3) 가변성의 분리
- 현명한 아키텍트라면 가능한 한 많은 처리를 불변 컴포넌트로 옮겨야 하고, 가변 컴포넌트에서는 가능한 한 많은 코드를 빼야한다.
- 불변 컴포넌트는 순수 함수형 컴포넌트가 아닌 하나 이상의 다른 컴포넌트와 서로 통신한다.
- 트랜잭션 메모리는 데이터베이스가 디스크의 레코드를 다루는 방식과 동일한 방식으로 메모리의 변수를 처리한다.
* 변수를 변경하는 컴포넌트와 변경하지 않는 컴포넌트를 분리하자.
    - -> 분리하려면 가변 변수들을 보호하는 적절한 수단을 동워내 뒷받침해야 한다.
* 현명한 아키텍트라면, 가능한 한 많은 처리를 불변 컴포넌트로 옮겨야하고, 가변 컴포넌트에서는 가능한 한 많은 코드를 빼내야 한다. 

 </br>
 </br>

### 4) 이벤트 소싱
- 기본 발상 : 애플리케이션의 수명주기 동안 문제 없이 동작할 정도의 저장공간, 처리능력을 가지고 트랜잭션의 모든 값을 저장한다.
- 이벤트 소싱이란?
    - 상태가 아닌 트랜잭션을 저장하는 전략
    - 상태가 필요해지면 단순히 상태의 시작점부터 모든 트랜잭션을 처리한다.
    - 단, 저장공간이 많이 필요하다.
    - 결과적으로는 CRUD가 아닌 그저 CR만 수행하고, 그렇기에 동시 처리 문제 등도 발생하지 않는다. (결국 완전한 함수형으로 만들 수 있다는 뜻. )


